# Sampling App - PWA –¥–ª—è —É—á—ë—Ç–∞ –≥–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±

## üìã –û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è PWA (Progressive Web App) –¥–ª—è:
- üìπ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤ –ø—Ä–æ–± —Å –∫–∞–º–µ—Ä—ã
- üíæ –õ–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –≤ IndexedDB
- ‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º
- üîå –†–∞–±–æ—Ç—ã –æ—Ñ–ª–∞–π–Ω
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä (—Ç–µ—Ä–º–∏–Ω–∞–ª 1)
npm start
# ‚úì –°–ª—É—à–∞–µ—Ç http://localhost:3000

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (—Ç–µ—Ä–º–∏–Ω–∞–ª 2)
python -m http.server 8000
# ‚úì –î–æ—Å—Ç—É–ø–Ω–æ http://localhost:8000

# 4. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
# ‚Üí http://localhost:8000
```

### –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Vercel

1. –ó–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ GitHub
2. –ó–∞–π—Ç–∏ –Ω–∞ https://vercel.com ‚Üí Add New Project
3. –í—ã–±—Ä–∞—Ç—å –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. –î–æ–±–∞–≤–∏—Ç—å Environment Variables:
   - `API_KEY` = test-key
   - `DATABASE_URL` = —Å—Ç—Ä–æ–∫–∞ PostgreSQL
5. –ù–∞–∂–∞—Ç—å Deploy

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ [VERCEL_DEPLOY.md](VERCEL_DEPLOY.md)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
.
‚îú‚îÄ frontend/
‚îÇ  ‚îú‚îÄ index.html           ‚Üê –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (PWA)
‚îÇ  ‚îú‚îÄ manifest.json        ‚Üê –ú–∞–Ω–∏—Ñ–µ—Å—Ç –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îÇ  ‚îî‚îÄ service-worker.js    ‚Üê –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ñ–ª–∞–π–Ω
‚îÇ
‚îú‚îÄ api/                    ‚Üê Serverless —Ñ—É–Ω–∫—Ü–∏–∏ (Vercel)
‚îÇ  ‚îú‚îÄ db.js               ‚Üê –ú–æ–¥—É–ª—å –ë–î
‚îÇ  ‚îú‚îÄ scans-bulk.js       ‚Üê POST /api/scans/bulk
‚îÇ  ‚îú‚îÄ scans-count.js      ‚Üê GET /api/scans/count
‚îÇ  ‚îî‚îÄ health.js           ‚Üê GET /api/health
‚îÇ
‚îú‚îÄ server.js               ‚Üê Express —Å–µ—Ä–≤–µ—Ä (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
‚îú‚îÄ migrate.js              ‚Üê –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îú‚îÄ package.json            ‚Üê –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ vercel.json             ‚Üê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vercel
‚îî‚îÄ README.md              ‚Üê –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Node.js** 16+
- **PostgreSQL** 12+ (–∏–ª–∏ Supabase, Railway, Render)
- **npm** –∏–ª–∏ yarn
- **–ë—Ä–∞—É–∑–µ—Ä** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
  - IndexedDB
  - Service Workers
  - getUserMedia (–¥–ª—è –∫–∞–º–µ—Ä—ã)

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (—Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ –ü–ö)
2. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ
3. –ü–æ–¥–≤–µ–¥–∏—Ç–µ —à—Ç—Ä–∏—Ö–∫–æ–¥ –≤ –æ–±–ª–∞—Å—Ç—å –ø—Ä–∏—Ü–µ–ª–∞
4. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ—á–∏—Ç–∞–µ—Ç –∫–æ–¥
5. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ë–ª–æ–∫ –∏ –°–∫–≤–∞–∂–∏–Ω—É
6. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø–∏—Å–∞—Ç—å"

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

- –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å
- –ü—Ä–∏ –æ—Ñ–ª–∞–π–Ω–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –≠–∫—Å–ø–æ—Ä—Ç

1. –ù–∞–∂–º–∏—Ç–µ "–≠–∫—Å–ø–æ—Ä—Ç CSV"
2. –°–∫–∞—á–∞–µ—Ç—Å—è —Ñ–∞–π–ª —Å–æ –≤—Å–µ–º–∏ –¥–∞–Ω–Ω—ã–º–∏
3. –ì–æ—Ç–æ–≤ –¥–ª—è Excel, Google Sheets, etc.

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- API –∫–ª—é—á –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `X-API-Key`
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ (HTTPS –Ω–∞ production)
- IndexedDB –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ –¥–æ–º–µ–Ω—É
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö

## üìä API Endpoints

### POST /api/scans/bulk
–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
curl -X POST http://localhost:3000/api/scans/bulk \
  -H "Content-Type: application/json" \
  -H "X-API-Key: test-key" \
  -d '[
    {
      "device_id": "device_123",
      "sample": "SAMPLE001",
      "well_name": "WL001",
      "block": "BLK01",
      "type": "520",
      "scanned_at": 1703780000000,
      "scanned_by": "–û–ø–µ—Ä–∞—Ç–æ—Ä 1",
      "is_test": false,
      "local_id": 1
    }
  ]'
```

–û—Ç–≤–µ—Ç:
```json
{
  "server_ids": [1, 2, 3],
  "total_on_server": 100
}
```

### GET /api/scans/count
–ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–±

```bash
curl http://localhost:3000/api/scans/count \
  -H "X-API-Key: test-key"
```

–û—Ç–≤–µ—Ç:
```json
{
  "total_on_server": 100
}
```

### GET /api/health
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

```bash
curl http://localhost:3000/api/health
```

## üåê –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ù–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Node.js –∏ PostgreSQL
2. –°–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. `npm install && npm run migrate`
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.env`
5. `npm start`

### –ù–∞ Vercel (–æ–±–ª–∞–∫–æ)

–°–º–æ—Ç—Ä–∏—Ç–µ [VERCEL_DEPLOY.md](VERCEL_DEPLOY.md)

### –ù–∞ Docker

```bash
docker-compose up -d
```

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ö–∞–º–µ—Ä–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
2. –ù–∞ IP –∞–¥—Ä–µ—Å–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12) –Ω–∞ –æ—à–∏–±–∫–∏

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ –∏–¥—ë—Ç

1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ `/api/scans/bulk`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API_KEY —Å–æ–≤–ø–∞–¥–∞–µ—Ç
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ (‚öô –∫–Ω–æ–ø–∫–∞)

### –ë–î –æ—à–∏–±–∫–∞

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω–∞
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é: `npm run migrate`

## üì± PWA –Ω–∞ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–µ

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ Android (Chrome)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Chrome
2. –ú–µ–Ω—é (—Ç—Ä–∏ —Ç–æ—á–∫–∏) ‚Üí "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω"
3. –ë—É–¥–µ—Ç –∏–∫–æ–Ω–∫–∞ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º "Sampling"

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ iOS

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ Safari
2. –ù–∞–∂–º–∏—Ç–µ Share ‚Üí "Add to Home Screen"
3. –ú–æ–∂–Ω–æ –∑–∞–∫—Ä–µ–ø–ª—è—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

PWA –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
- Service Worker –∫—ç—à–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–µ–¥–æ–º–ª—è–µ—Ç—Å—è
- –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –æ—á–∏—â–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤:
- **–ë—Ä–∞—É–∑–µ—Ä**: DevTools ‚Üí Console
- **–°–µ—Ä–≤–µ—Ä**: –∫–æ–Ω—Å–æ–ª—å (`npm start`)
- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: ‚öô –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å–æ–±—ã—Ç–∏–π)

## üéØ –§–∏—á–∏

- [x] –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤
- [x] –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (IndexedDB)
- [x] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º
- [x] –†–∞–±–æ—Ç–∞ –æ—Ñ–ª–∞–π–Ω
- [x] –≠–∫—Å–ø–æ—Ä—Ç CSV
- [x] PWA —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- [x] –¢—ë–º–Ω–∞—è —Ç–µ–º–∞
- [x] –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- [x] –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- [x] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## üë®‚Äçüíº –ö–æ–Ω—Ç–∞–∫—Ç—ã

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ –ø—Ä–æ–µ–∫—Ç–µ.

---

**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–î–∞—Ç–∞**: –î–µ–∫–∞–±—Ä—å 2024  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ Production Ready
